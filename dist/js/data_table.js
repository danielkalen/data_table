/*
 escape-html
 Copyright(c) 2012-2013 TJ Holowaychuk
 Copyright(c) 2015 Andreas Lubbe
 Copyright(c) 2015 Tiancheng "Timothy" Gu
 MIT Licensed
*/
(function(m){var t=function(a){"use strict";var b=Object.prototype.hasOwnProperty,c=Object.prototype.toString,e=function(a){return"function"===typeof Array.isArray?Array.isArray(a):"[object Array]"===c.call(a)},d=function(a){if(!a||"[object Object]"!==c.call(a))return!1;var d=b.call(a,"constructor"),e=a.constructor&&a.constructor.prototype&&b.call(a.constructor.prototype,"isPrototypeOf");if(a.constructor&&!d&&!e)return!1;for(var f in a);return"undefined"===typeof f||b.call(a,f)};return function k(){var a,
b,c=arguments[0],g=1,l=arguments.length,m=!1;if("boolean"===typeof c)m=c,c=arguments[1]||{},g=2;else if("object"!==typeof c&&"function"!==typeof c||null==c)c={};for(;g<l;++g){var p=arguments[g];if(null!=p)for(a in p){var q=c[a];var r=p[a];c!==r&&(m&&r&&(d(r)||(b=e(r)))?(b?(b=!1,q=q&&e(q)?q:[]):q=q&&d(q)?q:{},c[a]=k(m,q,r)):"undefined"!==typeof r&&(c[a]=r))}}return c}}.call(this,{});var v=function(a){"use strict";var b=/["'&<>]/;return a=function(a){a=""+a;var c=b.exec(a);if(!c)return a;var d="",f,
k=0;for(f=c.index;f<a.length;f++){switch(a.charCodeAt(f)){case 34:c="&quot;";break;case 38:c="&amp;";break;case 39:c="&#39;";break;case 60:c="&lt;";break;case 62:c="&gt;";break;default:continue}k!==f&&(d+=a.substring(k,f));k=f+1;d+=c}return k!==f?d+a.substring(k,f):d}}.call(this,{});var l={tableOuterwrap:function(a){var b=a.ID;var c=a.baseClass;return"<div id='"+c+"-"+b+"' class='"+c+"-outerwrap {{loading}} {{noResults}} {{hasError}} "+(a.minWidth?"_hasMinWidth":"")+" "+(a.hasMobile?"{{mobileVersion}}":
"")+" "+(a.cellsHavePadding?"_cellsHavePadding":"")+" '></div>"},table:function(a){var b=a.baseClass;return"<div class='"+b+" alignment---"+a.alignment+" sortDirection---{{sortDirection}}'> <div class='"+b+"-heading'> <div class='"+b+"-heading-row'></div> </div> <div class='"+b+"-body'></div> </div>"},loading:function(a){a=a.baseClass;return"<div class='"+a+"-loading {{isVisible}}'> <div class='"+a+"-loading-innerwrap'> <div class='"+a+"-loading-icon'></div> <div class='"+a+"-loading-text'>Loading</div> </div> </div>"},
noResults:function(a){var b,c;var e=a.baseClass;var d=null!=(b=a.itemSingleLabel)?b:"Item";a=null!=(c=a.itemPluralLabel)?c:d+"s";return"<div class='"+e+"-noResults {{isVisible}}'> <div class='"+e+"-noResults-innerwrap'> <div class='"+e+"-noResults-icon'></div> <div class='"+e+"-noResults-text'> <div class='"+e+"-noResults-text-title'>No "+d+"s to Display</div> <div class='"+e+"-noResults-text-subtitle'>There are no matching "+a+" for the search query you've typed.</div> </div> </div> </div>"},error:function(a){a=
a.baseClass;return"<div class='"+a+"-error {{isVisible}}'> <div class='"+a+"-error-innerwrap'> <div class='"+a+"-error-icon'></div> <div class='"+a+"-error-text'> <div class='"+a+"-error-text-title'>A Fatal Error has Occured</div> <div class='"+a+'-error-text-subtitle\'>Report the following to the admin:<br />"{{errorMessage}}"</div> </div> </div> </div>'},pageStatus:function(a){return"<div class='"+a.baseClass+"-pageStatus "+(a.showPageStatus?"is_visible":"")+"'> Showing {{rowRange}} of {{totalRows}} </div>"},
pagination:function(a){a=a.baseClass;return"<div class='"+a+"-pagination {{hasExtra}} {{isVisible}}'> <div class='"+a+"-pagination-item _paginationItem _back'> <div class='"+a+"-pagination-item-text'></div> </div> <div class='"+a+"-pagination-itemswrap _paginationItems'></div> <div class='"+a+"-pagination-item _paginationItem _extraIndicator'> <div class='"+a+"-pagination-item-text'></div> <select class='"+a+"-pagination-item-select'></select> </div> <div class='"+a+"-pagination-item _paginationItem _next'> <div class='"+
a+"-pagination-item-text'></div> </div> </div>"},paginationItem:function(a){var b=a.baseClass;return"<div class='"+b+"-pagination-item _paginationItem'> <div class='"+b+"-pagination-item-text'>"+a.value+"</div> </div>"},headingCell:function(a){var b,c,e;var d=a.baseClass;var f=null!=(b=a.extraClasses)?b:"";var k=a.slug;b=null!=(c=a.icon)?c:"";c=a.label;a=null!=(e=a.style)?e:"";return"<div class='"+d+"-heading-row-cell "+f+" __"+k+"' data-slug='"+k+"' data-icon='"+b+"' "+a+"> <div class='"+d+"-heading-row-cell-text'>"+
c+"</div> </div>"},row:function(a){var b;var c=a.baseClass;var e=a.rowID;var d=a.cells;a=null!=(b=a.drilldown)?b:"";return"<div class='"+c+"-body-row _tableRow {{drilldownState}}' data-row-id='"+e+"'> <div class='"+c+"-body-row-expandDrilldown _expandDrilldown'> <div class='"+c+"-body-row-expandDrilldown-icon'></div> </div> "+d+" <div class='"+c+"-body-row-drilldown _tableRowDrilldown'> "+a+" </div> </div>"},rowCell:function(a){var b,c;var e=a.baseClass;var d=null!=(b=a.extraClasses)?b:"";var f=a.label;
b=a.column;var k=a.slug;var h=a.value;a=null!=(c=a.style)?c:"";return"<div class='"+e+"-body-row-cell __"+k+" "+d+"' data-slug='"+k+"' data-column='"+b+"' "+a+"> <div class='"+e+"-body-row-cell-innerwrap' title='"+f+"'>"+h+"</div> </div>"},searchField:function(a){var b=a.baseClass;a=a.search;return"<div class='"+b+"-search "+(null!=a&&a.length?"is_visible":"")+"'> <select class='"+b+"-search-select'></select> <input class='"+b+"-search-input' /> <div class='"+b+"-search-selectTrigger'></div> </div>"},
ipDetails:function(a){var b;var c=a.baseClass;var e=a.ipAddress;a=null!=(b=a.extra)?b:"";return"<div class='"+c+"-ipDetails _ipDetails' data-ip='"+e+"'> <div class='"+c+"-ipDetails-trigger _ipDetails-trigger'></div> <div class='"+c+"-ipDetails-content'>Loading IP Details</div> </div> "+a},ipDetailsItem:function(a){var b=a.baseClass;return"<div class='"+b+"-ipDetails-content-item'> <div class='"+b+"-ipDetails-content-item-label'>"+a.label+": </div> <div class='"+b+"-ipDetails-content-item-value'>"+
a.value+"</div> </div>"},fields:function(a){return"<div class='"+a.baseClass+"-fieldGroup'>"+a.fields+"</div>"},fieldsItem:function(a){var b=a.baseClass;return"<div class='"+b+"-fieldGroup-item'> <div class='"+b+"-fieldGroup-item-label'>"+a.label+": </div> <div class='"+b+"-fieldGroup-item-value'>"+v(a.value)+"</div> </div>"},button:function(a){var b;var c=a.baseClass;var e=a.action;var d=null!=(b=a.icon)?b:"";return"<div class='"+c+"-button _actionButton "+(a.isMulti?"_isMulti":"")+"' data-action='"+
e+"'> <div class='"+c+"-button-icon'>"+d+"</div> </div>"},actions:function(a){var b=a.baseClass;return"<div class='"+b+"-actions'> <div class='"+b+"-actions-popup'>"+a.actions+"</div> </div>"},actionsOverlay:function(){return"<div class='"+g.defaults.baseClass+"-actions-overlay'></div>"},actionsItem:function(a){var b;var c=a.baseClass;var e=a.action;var d=a.icon;var f=a.label;a=null!=(b=a.customIconStyle)?b:"";return"<div class='"+c+"-actions-popup-item _actionButton _subActionButton' data-action='"+
e+"' style='"+a+"'> <div class='"+c+"-actions-popup-item-icon'>"+d+"</div> <div class='"+c+"-actions-popup-item-text'>"+f+"</div> </div>"}};var p={compareValues:function(a,b){switch(!1){case typeof a!==typeof b:return a===b;case "string"!==typeof a:return a===""+b;case "number"!==typeof a:return a===parseFloat(b)}},toggleActionsPopup:function(a){var b,c;(b=a.data("isOpen"))?(a.data("overlay").remove(),a.removeClass("is_visible")):(a.data("overlay",c=m(l.actionsOverlay())),a.addClass("is_visible"),
c.appendTo(document.body).one("click",function(){return p.toggleActionsPopup(a)}));return a.data("isOpen",!b)},getBreakdownTotal:function(a,b){switch(!1){case 0!==b.length:return 0;default:return b.map(function(b){return a[b]}).reduce(function(a,b){return a+b})}},normalizeColumns:function(a){var b,c;if(Array.isArray(a)){var e={};if("string"===typeof a[0]){var d=0;for(b=a.length;d<b;d++){var f=a[d];e[f]={label:f}}}else if(null!=(d=a[0])&&d.label)for(b=0,c=a.length;b<c;b++)d=a[b],e[d.label]=d}else e=
a;for(f in e)d=e[f],null==d.label&&(d.label=f),null==d.slug&&(d.slug=d.label.toLowerCase().replace(/\W/g,"_")),null==d.type&&(d.type="text");return e},getBreakdownBarWidth:function(a,b){return a.breakdownBarTotal/b*82},genHeaderCellStyle:function(a){var b="";a.width&&(b+="max-width: "+a.width+";");0<=a.grow&&(b+="flex-grow: "+a.grow+";");return b?"style='"+b+"'":""},genCellStyle:function(a){var b="";a.width&&(b+="max-width: "+a.width+";");if(a.color){var c=this.colorMapping(a.color,a.colorType);b+=
"color: "+c+";"}a.customStyle&&(b+=a.customStyle);0<=a.grow&&(b+="flex-grow: "+a.grow+";");return b?"style='"+b+"'":""},genCellClassname:function(a){var b="";a.sortable&&(b+=" _isSortable {{currentSort}}");a.noLabel&&(b+=" _noLabel");a.isLink&&(b+=" _isLink");a.noEllipsis&&(b+=" _noEllipsis");a.showOverflow&&(b+=" _showOverflow");a.color&&(b+=" _hasColor");if("button"===a.type||"actions"===a.type)b+=" _isButton",a.alwaysCenter=!0;"breakdownBar"===a.type&&(b+=" _isBreakdownBar");"ipDetails"===a.type&&
(b+=" _isIpDetails");"fields"===a.type&&(b+=" _isFields");a.alwaysCenter&&(b+=" _alwaysCenter");return b},colorMapping:function(a,b){null==b&&(b="name");switch(b){case "browser":switch(!1){case !a.includes("Firefox"):return this.colorMapping("orange");case !a.includes("Chrome"):return this.colorMapping("green");case !a.includes("Safari"):return this.colorMapping("blue");case !a.includes("Mobile Safari"):return this.colorMapping("blue");case !a.includes("IE"):return this.colorMapping("lightblue");
case !a.includes("Edge"):return this.colorMapping("lightblue");case !a.includes("Opera"):return this.colorMapping("red");case !a.includes("Android"):return this.colorMapping("lightgreen");default:return"unknown"}case "platform":switch(a){case "Mac OS X":return this.colorMapping("black");case "Windows":return this.colorMapping("lightblue");case "Windows Phone":return this.colorMapping("purple");case "Linux":return this.colorMapping("darkyellow");case "iOS":return this.colorMapping("black");case "Android":return this.colorMapping("lightgreen");
default:return"unknown"}case "satisfaction":switch(a){case "Excellent":return this.colorMapping("green");case "Normal":return this.colorMapping("yellow");case "Poor":return this.colorMapping("red");default:return"unknown"}case "name":switch(a){case "orange":return"#ee6f0e";case "green":return"#00ad09";case "blue":return"#4788f3";case "yellow":return"#eab71e";case "red":return"#cc4820";case "black":return"#181818";case "purple":return"#a020ba";case "lightblue":return"#0cb3ee";case "lightgreen":return"#78c257";
case "darkyellow":return"#e8ac01"}break;default:return a}},iconMapping:function(a,b){switch(b){case "browser":switch(!1){case !a.includes("Firefox"):return"#";case !a.includes("Chrome"):return"%";case !a.includes("Safari"):return"$";case !a.includes("Mobile Safari"):return"$";case !a.includes("IE"):return"&";case !a.includes("Edge"):return"&";case !a.includes("Opera"):return'"';case !a.includes("Android"):return"&#039;";default:return"4"}case "device":switch(a){case "Desktop":return"!";case "Tablet":return"7";
case "Mobile":return"6";default:return"4"}case "platform":switch(a){case "Mac OS X":return"*";case "Windows":return")";case "Windows Phone":return")";case "Linux":return"+";case "iOS":return"*";case "Android":return"&#039;";default:return"4"}case "satisfaction":switch(a){case "Excellent":return"[";case "Normal":return"@";case "Poor":return"?";default:return"4"}default:return"4"}}};var g=function(a,b){this.container=a;null==b&&(b={});this.options=t({},g.defaults,b);this.state={loading:!0,noResults:!1,
error:!1};this.ID=++w;this.tableID="#"+this.options.baseClass+"-"+this.ID;this.visibleRows=[];this.availableRows=[];this.allRows=[];this.largestBreakdownTotal=0;this.searchParam=this.searchCriteria="";this.sortBy=this.options.sortBy?this.options.sortBy:"";this.sortDirection=-1;this.currentPage=1;this.els={};this.els.tableOuterwrap=m(l.tableOuterwrap(m.extend({ID:this.ID},this.options)));this.els.table=m(l.table(this.options)).appendTo(this.els.tableOuterwrap);this.els.tableHeading=this.els.table.children().first().children();
this.els.tableBody=this.els.table.children().last();this.els.noResultsMessage=m(l.noResults(this.options)).appendTo(this.els.tableOuterwrap);this.els.loadingMessage=m(l.loading(this.options)).appendTo(this.els.tableOuterwrap);this.els.errorMessage=m(l.error(this.options)).appendTo(this.els.tableOuterwrap);this.els.pageStatus=m(l.pageStatus(this.options)).appendTo(this.els.tableOuterwrap);this.els.pagination=m(l.pagination(this.options)).appendTo(this.els.tableOuterwrap);this.els.paginationItems=this.els.pagination.children("._paginationItems");
this.els.paginationExtra=this.els.pagination.children("._extraIndicator");this.els.paginationExtraSelect=this.els.paginationExtra.children("select");this.els.paginationExtraText=this.els.paginationExtraSelect.prev();this.els.searchField=m(l.searchField(this.options)).insertBefore(this.els.table);this.els.searchParam=this.els.searchField.children("select");this.els.searchCriteria=this.els.searchField.children("input");this.els.globalStyles=m("<style />").prependTo(this.els.tableOuterwrap);this.els.tableHeading.append(this.generateHeadingColumns());
this.els.tableOuterwrap.appendTo(this.container);this.els.table.data("DataTable",this);this.options.minWidth&&(this.els.table[0].style.minWidth=this.options.minWidth+"px");Promise.bind(this).then(this.attachEvents).then(this.attachBindings).then(function(){if(this.options.loadOnInit)return this.loadData()});return this};g.prototype.fetchData=function(){this.state.loading=!0;return this.options.data().then(function(a){return function(b){a.state.loading=!1;return Promise.resolve(b)}}(this))["catch"](function(a){return function(b){return a.state.error=
b}}(this))};g.prototype.setData=function(a){if(Array.isArray(a))return this.allRows=a};g.prototype.loadData=function(){var a;if(this.allRows.length){var b=this.allRows;var c=0;for(a=b.length;c<a;c++){var e=b[c];this.unprocessRow(e)}}return this.fetchData().then(function(a){return function(b){return a.setData(b)}}(this))};g.prototype.markupArgs=function(a){null==a&&(a={});a.baseClass=this.options.baseClass;return a};g.prototype.calcPageCount=function(a){this.pageCountReal=Math.ceil(a.length/this.options.perPage);
return this.pageCount=this.pageCountReal>this.options.pageCountMax?this.options.pageCountMax:this.pageCountReal};g.prototype.calcPercentageString=function(a,b,c){b=this.options.percentage[b];var e=b[0];var d=b[2];var f=b[1];b=function(){switch(f){case "*":return c[e]*c[d];case "/":return c[e]/c[d];case "+":return c[e]+c[d];case "-":return c[e]-c[d]}}();Infinity===b&&(b=0);b=convertToPercent(b);return a+" ("+b+")"};g.prototype.sortRows=function(a,b){null==b&&(b=this.options.sortBy);switch(!1){case "+"!==
b:return a;case "-"!==b:return null!=a?a.slice().reverse():void 0;case !this.options.columns[b]:var c=this.options.columns[b].sortFn;var e=this.options.columns[b].rawValueFormatter;return a.slice().sort(c||function(a){return function(d,c){var f=e?e(d[b]):d[b];var k=e?e(c[b]):c[b];switch(!1){case !(f>k):return a.sortDirection;case !(f<k):return-1*a.sortDirection;default:return 0}}}(this));default:return a}};g.prototype.setVisiblePage=function(a){var b;a--;var c=this.availableRows.slice(a*this.options.perPage,
a*this.options.perPage+this.options.perPage);var e=this.visibleRows.slice();a=0;for(b=e.length;a<b;a++){var d=e[a];d.visible=!1}this.visibleRows.length=0;return this.visibleRows.push.apply(this.visibleRows,c)};g.prototype.setPageIndicator=function(a){"..."===a&&(a=1);a=a>this.options.pageCountMax?this.options.pageCountMax:a-1;var b=this.els.pagination.find("._paginationItem").slice(1,-1);a=b.eq(a);a.addClass("current");return b.not(a).removeClass("current")};g.prototype.generateHeadingColumns=function(){var a,
b;this.options.columns=p.normalizeColumns(this.options.columns);(function(){var c=this.options.columns;var e=[];for(b in c)a=c[b],e.push("breakdownBar"===a.type);return e}).call(this)&&(this.hasBreakdownBar=!0);return Object.keys(this.options.columns).map(function(b){return function(c){a=b.options.columns[c];b.els.globalStyles[0].innerHTML+="{{"+a.slug+"}}\n";return l.headingCell(b.markupArgs({slug:a.slug,icon:a.icon,label:a.label,style:p.genHeaderCellStyle(a),extraClasses:p.genCellClassname(a)}))}}(this)).join("")};
g.prototype.updateColumns=function(a){a=p.normalizeColumns(a);t(!0,this.options.columns,a);return this.currentPage=this.currentPage};g.prototype.processRow=function(a){var b;a.processed||(this.generateRow(a),SimplyBind("visible",{updateEvenIfSame:!0}).of(a).to(function(b){return function(c,d){if(c){if(a.el.appendTo(b.els.tableBody),b.hasBreakdownBar&&!a.updatedBreakdownWidth&&c!==d)return a.breakdownBarWidth=p.getBreakdownBarWidth(a,b.largestBreakdownTotal)}else return a.el.detach()}}(this)),this.hasBreakdownBar&&
null!=(b=a.breakdownBarEl)&&b.length&&SimplyBind("largestBreakdownTotal").of(this).to("updatedBreakdownWidth").of(a).transform(function(){return a.visible?!0:!1}).and.to("breakdownBarWidth").of(a).transform(function(b){return function(){return p.getBreakdownBarWidth(a,b.largestBreakdownTotal)}}(this)).chainTo("width").of(a.breakdownBarEl[0].style).transform(function(a){return a+"%"}).and.to(function(b){return function(){var b,d;var c=a.drilldownEls;var k=b=0;for(d=c.length;b<d;k=++b){var h=c[k];k=
p.getBreakdownBarWidth(a.drilldown[k],a.drilldown.largestBreakdownTotal);null!=(h=m(h).children(".is_breakdown_bar").children().children()[0])&&(h.style.width=k+"%")}}}(this)).condition(function(){return a.drilldown}).conditionAll(function(){return a.visible}),a.processed=!0);return a};g.prototype.unprocessRow=function(a){if(a.processed)return SimplyBind.unBindAll(a,!0),this.hasBreakdownBar&&a.breakdownBarEl[0]&&SimplyBind.unBindAll(a.breakdownBarEl[0].style),a.el.remove(),delete a.el,delete a.drilldownEls,
delete a.visible,delete a.breakdownBarEl,delete a.processed};g.prototype.reRenderRow=function(a){return this.generateRow(a)};g.prototype.generateRow=function(a){var b=a.el;var c=a.el=m(this.generateRowMarkup(a)).data("row",a);b&&b.replaceWith(c);a.drilldown&&(a.expandButton=a.el.children().first());a.drilldown&&(a.drilldownEls=a.el.children("._tableRowDrilldown").children());this.hasBreakdownBar&&(a.breakdownBarEl=a.el.children(".isBreakdownBar").children().children());b||(a.visible=!1);a.drilldown&&
(this.hasBreakdownBar&&(a.drilldown.largestBreakdownTotal=Math.max.apply(Math,a.drilldown.map(function(a){return a.breakdownBarTotal}))),SimplyBind("drilldownOpen").of(a).to("className.drilldownState").of(a.el).transform(function(a){return a?"hasDrilldown drilldownIsOpen":"hasDrilldown"}),SimplyBind("visible").of(a).once.to(function(){return SimplyBind(function(){if(!a.drilldownOpen)return setTimeout(function(){var b=a.el.height();var d=a.expandButton.height();return a.expandButton[0].style.top=b/
2-d/2+"px"})}).updateOn("event:resize",{throttle:300}).of(window)}).condition(function(a){return a}));return a};g.prototype.generateRowMarkup=function(a,b){var c=!!b;return l.row(this.markupArgs({rowID:c?b[this.options.uniqueID]:a[this.options.uniqueID],drilldown:c?"":a.drilldown?function(b){return function(){var d;var c="";var e=a.drilldown;var h=0;for(d=e.length;h<d;h++){var n=e[h];c+=b.generateRowMarkup(n,a)}return c}}(this)():void 0,cells:function(b){return function(){var d;var c="";var e=b.options.columns;
for(d in e){var h=e[d];var n=a[d];b.options.percentage[d]&&(n=b.calcPercentageString(n,d,a));c+=l.rowCell(b.markupArgs({label:"string"===typeof n?n:"",column:d,slug:h.slug,extraClasses:p.genCellClassname(h),style:p.genCellStyle(h),value:function(){switch(!1){case "fields"!==h.type:return b.generateInlineFields(n,a,h);case "ipDetails"!==h.type:return b.generateIpDetails(n,a,h);case "breakdownBar"!==h.type:return b.generateBreakdownBar(n,a,h);case "button"!==h.type:return b.generateButton(h.action||
n,h.buttonIcon||h.icon);case "actions"!==h.type:return b.generateActions(h,a,h);case !h.isLink:return"<a href='"+n+"' target='_blank'>"+n+"</a>";default:return h.formatter?h.formatter(n,a,h):n}}()}))}return c}}(this)()}))};g.prototype.generateBreakdownBar=function(a,b,c){var e;var d=this.legend||Object.keys(a);return(b.breakdownBarTotal=e=this.getBreakdownTotal(a,d))?l.breakdownBar(this.markupArgs({total:e,totalFormatted:c.valueFormat?c.valueFormat(e):e,bars:function(){var b;var c="";var h=0;for(b=
d.length;h<b;h++){var n=d[h];n=a[n];c+=l.block_table_body_row_cell_breakdown_bar.replace("{{width}}",n/e*100)}return c}(),hoverBox:function(){return l.block_table_body_row_cell_breakdown_hoverbox.replace("{{rows}}",function(){var b="";d.forEach(function(d,f){return b+=l.block_table_body_row_cell_breakdown_hoverbox_row.replace("{{color}}",customColors(f)).replace("{{key}}",d).replace("{{value}}",c.valueFormat?c.valueFormat(a[d]):a[d])});return b})}()})):"N/A"};g.prototype.generateInlineFields=function(a){return l.fields(this.markupArgs({fields:function(b){return function(){var c,
e;return"object"!==typeof a?"":function(){var b=[];for(c in a)e=a[c],b.push(l.fieldsItem(this.markupArgs({label:c,value:e})));return b}.call(b).join("")}}(this)()}))};g.prototype.generateButton=function(a,b,c){return l.button(this.markupArgs({action:a,icon:b,isMulti:c}))};g.prototype.generateActions=function(a){null==a.actions&&(a.actions="multiActions");var b=this.generateButton(a.actions,a.buttonIcon||a.icon,!0);a=l.actions(this.markupArgs({actions:function(a){return function(){var b;return a.options.actions?
function(){var a;var c=this.options.actions;var e=[];var h=0;for(a=c.length;h<a;h++)b=c[h],e.push(l.actionsItem(this.markupArgs(b)));return e}.call(a).join(""):""}}(this)()}));return b+a};g.prototype.generateIpDetails=function(a,b,c){return l.ipDetails(this.markupArgs({ipAddress:a,extra:"function"===typeof c.extraMarkup?c.extraMarkup(a,b):void 0}))};g.prototype.attachEvents=function(){this.els.pagination.on("click","._paginationItem",function(a){return function(b){b=m(b.currentTarget);var c=b.hasClass("_back");
var e=b.hasClass("_next");var d=b.hasClass("_extraIndicator");if(c){if(1!==a.currentPage)return a.currentPage--}else if(e){if(a.currentPage!==a.pageCountReal)return a.currentPage++}else if(!d)return b=parseFloat(b.children().html()),a.currentPage=b}}(this));this.els.tableHeading.on("click","._isSortable",function(a){return function(b){return a.sortBy=b.currentTarget.children[0].textContent}}(this));this.els.tableBody.on("click","._actionButton",function(a){return function(b){var c=m(b.currentTarget);
if(c.hasClass("_isMulti"))return p.toggleActionsPopup(c.next().children());var e=c.closest("._tableRow");b=c.data("action");var d=e.data("row-id");e.data("index");e=d?a.allRows.find(function(b){return p.compareValues(b[a.options.uniqueID],d)}):void 0;null==e&&(e=d);c.hasClass("_subActionButton")&&p.toggleActionsPopup(c.parent());return a.els.table.trigger("action."+b,e)}}(this));this.els.tableBody.on("click","._expandDrilldown",function(a){return function(a){a=m(a.currentTarget).parent().data("row");
return a.drilldownOpen=!a.drilldownOpen}}(this));this.els.tableBody.on("mouseover","._ipDetails-trigger",function(a){return function(b){var c=m(b.currentTarget);var e=c.parent();var d=c.next();d.next();b=e.data("ip");if(!c.hasClass("_isReady"))return a.options.ipDataFetcher(b).then(function(b){var c,f;if(b){var n=function(){var a=[];for(c in b)f=b[c],a.push(l.ipDetailsItem(this.markupArgs({label:c,value:f})));return a}.call(a);d.html(n.join(""));return e.addClass("_isReady")}})}}(this));return Promise.resolve()};
g.prototype.attachBindings=function(){var a;SimplyBind.settings.trackArrayChildren=!1;SimplyBind("noResults").of(this.state).to("className.isVisible").of(this.els.noResultsMessage).transform(function(a){return function(b){return b&&!a.state.loading?"is_visible":""}}(this)).and.to("className.noResults").of(this.els.tableOuterwrap).transform(function(a){return function(b){return b&&!a.state.loading?"_noResults":""}}(this));SimplyBind("loading").of(this.state).to("className.isVisible").of(this.els.loadingMessage).transform(function(a){return a?
"is_visible":""}).and.to("className.loading").of(this.els.tableOuterwrap).transform(function(a){return function(a){return a?"_loading":""}}(this)).and.to(function(a){return function(b){return b?a.state.noResults=!1:a.state.noResults=!a.visibleRows.length}}(this));SimplyBind("error").of(this.state).to("textContent.errorMessage").of(this.els.errorMessage).and.to("className.isVisible").of(this.els.errorMessage).transform(function(a){return a?"is_visible":""}).and.to("className.hasError").of(this.els.tableOuterwrap).transform(function(a){return a?
"_error":""}).and.to(function(a){if(a)return console.error(a)});this.options.hasMobile&&(this.windowWidth=window.innerWidth,SimplyBind("event:resize").of(window).to(function(a){return function(){return a.windowWidth=window.innerWidth}}(this)),SimplyBind("windowWidth").of(this).to("className.mobileVersion").of(this.els.tableOuterwrap).transform(function(a){return function(b){return b<=a.options.mobileWidth?"_mobileVersion":""}}(this)));var b=this.options.columns;var c=function(a){return function(b){return SimplyBind("hidden").of(b).to("innerHTML."+
b.slug).of(a.els.globalStyles).transform(function(d){return d?a.tableID+" .__"+b.slug+" {display:none}":""})}}(this);for(a in b){var e=b[a];c(e)}SimplyBind("array:visibleRows").of(this).to(function(a){return function(b,d){var c,e;if(null!=d&&d.length){var f=0;for(c=d.length;f<c;f++){var k=d[f];k.visible=!1}}try{var g=0;for(e=b.length;g<e;g++)k=b[g],a.processRow(k),k.visible=!0}catch(u){a.state.error=u}return a.state.noResults=!b.length}}(this)).and.to(function(a){return function(b){var d;if(a.hasBreakdownBar){var c=
0;for(d=b.length;c<d;c++){var e=b[c];if(e.breakdownBarTotal>f||"undefined"===typeof f||null===f)var f=e.breakdownBarTotal}return a.largestBreakdownTotal=f||0}}}(this)).and.to("textContent.rowRange").of(this.els.pageStatus).transform(function(a){return function(b){return a.availableRows.indexOf(b[0])+1+"-"+(a.availableRows.indexOf(b.slice(-1)[0])+1)}}(this));SimplyBind("array:allRows").of(this).to(function(a){return function(b){a.searchCriteria="";a.currentPage=1;a.state.noResults=!b.length;return a.sortBy===
a.options.sortBy?(a.sortBy="",a.sortBy=a.options.sortBy):a.sortBy=""}}(this));SimplyBind("availableRows",{updateOnBind:!1,updateEvenIfSame:!0}).of(this).to(function(a){return function(b){return a.calcPageCount(b)}}(this)).and.to("textContent.totalRows").of(this.els.pageStatus).transform(function(a){return a.length});SimplyBind("pageCount").of(this).to("innerHTML").of(this.els.paginationItems).transform(function(a){return function(b){var c,d;var e="";for(d=c=1;1<=b?c<=b:c>=b;d=1<=b?++c:--c)0!==d&&
(e+=l.paginationItem(a.markupArgs({value:d})));return e}}(this)).and.to("className.isVisible").of(this.els.pagination).transform(function(a){return 1<a?"is_visible":""});SimplyBind("pageCountReal").of(this).to("innerHTML").of(this.els.paginationExtraSelect).transform(function(a){return function(b){var c,d,e;if(b<=a.options.pageCountMax)return"";var f="<option>...</option>";for(d=c=e=a.options.pageCountMax+1;e<=b?c<=b:c>=b;d=e<=b?++c:--c)f+="<option>"+d+"</option>";return f}}(this)).and.to("className.hasExtra").of(this.els.pagination).transform(function(a){return function(b){return b>
a.options.pageCountMax?"has_extra":""}}(this));SimplyBind("value",{updateOnBind:!1}).of(this.els.paginationExtraSelect).to("innerHTML").of(this.els.paginationExtraText).and.to("currentPage").of(this);SimplyBind("currentPage",{updateEvenIfSame:!0}).of(this).transformSelf(function(a){return function(b){b="..."===b?1:parseFloat(b);return b>a.pageCountReal?a.pageCountReal:b}}(this)).to("value").of(this.els.paginationExtraSelect).transform(function(a){return function(b){return b>a.options.pageCountMax?
b:"..."}}(this)).and.to(function(a){return function(b){a.setVisiblePage(b);return a.setPageIndicator(b)}}(this));this.options.search.length&&(this.searchParam=this.options.search[0],SimplyBind("search").of(this.options).to("innerHTML").of(this.els.searchParam).transform(function(a){return a.map(function(a){return"<option>"+a+"</option>"}).join("")}),SimplyBind("value").of(this.els.searchParam).to("searchParam").of(this).pipe("attr:placeholder").of(this.els.searchCriteria).transform(function(a){return"Search by "+
a}));SimplyBind("value").of(this.els.searchCriteria).to("searchCriteria",{updateEvenIfSame:!0}).of(this).bothWays().chainTo(function(a){return function(b){var c;var d=a.allRows;var f=a.options.columns[a.searchParam];b&&(f||null!=(null!=(c=a.allRows[0])?c[a.searchParam]:void 0))&&(d=d.filter(function(c){c=null!=f&&f.rawValueFormatter?f.rawValueFormatter(c[a.searchParam]):c[a.searchParam];return null!=c?c.toString().toLowerCase().includes(b.toLowerCase()):void 0}));a.options.rowFilter&&(d=d.filter(function(b){var c;
var d=m.extend({},b);b=a.options.columns;for(c in b)e=b[c],e.rawValueFormatter&&(d[c]=e.rawValueFormatter(d[c]));return a.options.rowFilter(d)}));a.availableRows=d;return a.currentPage=1}}(this));SimplyBind("sortBy",{updateEvenIfSame:!0,updateOnBind:!1},!0).of(this).to(function(a){return function(b,c){if(b||c)return a.sortDirection=b===c&&c?-1*a.sortDirection:-1,a.availableRows=a.sortRows(a.availableRows,b?b:null),a.currentPage=1}}(this));this.els.tableHeading.children("._isSortable").length&&SimplyBind("sortBy",
{updateOnBind:!0}).of(this).to("multi:className.currentSort").of(this.els.tableHeading.children("._isSortable")).transform(function(a,b,c){return a===c.children[0].textContent?"_currentSort":""});SimplyBind("sortDirection").of(this).to("className.sortDirection").of(this.els.table).transform(function(a){return-1===a?"desc":"asc"});return Promise.resolve()};g.prototype.sortBy=function(a){};var w=0;g.version="2.8.2";g.helpers=p;g.markup=l;g.defaults={perPage:20,pageCountMax:10,minWidth:0,mobileWidth:736,
cellsHavePadding:!1,hasMobile:!0,loadOnInit:!0,columns:[],search:[],percentage:{},baseClass:"DataTable",showPageStatus:!0,sortBy:"",alignment:"left",actions:!1,ipDataFetcher:function(a){return new Promise(function(b){return m.get("http://ipinfo.io/"+a,b,"JSON")})}};return window.DataTable=g})(jQuery);
